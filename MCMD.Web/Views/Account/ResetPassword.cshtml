@model MCMD.ViewModel.Account.ResetPasswordConfirmModel

@{
    ViewBag.Title = "ResetPassword";
    Layout = "~/Views/Shared/_DefaultLayout.cshtml";
}

@section Scripts
{
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/jquery.reveal.js")"></script>
    <link rel="stylesheet" href="@Url.Content("~/Content/reveal.css")" />
    <script type="text/javascript" src="@Url.Content("~/Scripts/spin.min.js")"></script>

    <script type="text/javascript">

    $(document).ready(function () {
        $("#btnCancel").click(function () {
            location.href = '@Url.Action("Login", "Account")';
            });
        });

        $(document).ready(function () {
            if ('@ViewBag.StatusMessage' != '') {
            $('#uploadModal').reveal({
                closeonbackgroundclick: false,
                dismissmodalclass: 'close-reveal-modal'
            });
        }
    });
    </script>
}


@using (Html.BeginForm("ResetPassword", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    <div class="container">
        <div class="login-container">
            <div class="form-container">

                <h2>Reset Password</h2>
                <p>Enter your new password </p>
                <div class="form-horizontal">
                    <div class="validation-summary">@Html.ValidationSummary(true)</div>
                    <div class="form-group">
                        <label for="firstname" class="col-sm-4 control-label">New Password<span>*</span></label>
                        <div class="col-sm-8">
                            @Html.PasswordFor(m => m.NewPassword, new { @class = "form-control", @placeholder = "Enter password", @maxlength = "50", @autocomplete = "off" })
                            @Html.ValidationMessageFor(m => m.NewPassword)
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="firstname" class="col-sm-4 control-label">Confirm Password<span>*</span></label>
                        <div class="col-sm-8">
                            @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", @placeholder = "Enter confirm password", @maxlength = "50", @autocomplete = "off" })
                            @Html.ValidationMessageFor(m => m.ConfirmPassword)
                        </div>
                    </div>
                    @if (!String.IsNullOrEmpty(@ViewBag.StatusMessage))
                    {
                        if (object.ReferenceEquals(@ViewBag.Status, null))
                        {
                            <span class="login-row red field-validation-error">@ViewBag.StatusMessage</span>
                        }
                        else
                        {
                            <span id="uploadModal" class="reveal-modal">
                                <span class="login-row">@ViewBag.StatusMessage @Html.ActionLink("Click Here", "Login", "Account") for Login now</span>
                            </span>
                        }
                    }
                    <div class="form-group">
                        <label class="col-sm-4"></label>
                        <div class="col-sm-8 login">
                            <button type="submit" class="btn">Submit</button>

                            <button type="submit" id="btnCancel" class="btn">Cancel</button>
                        </div>
                    </div>
                </div>
                @Html.HiddenFor(m => m.EmailId)
                @Html.HiddenFor(m => m.Token)
            </div>
        </div>
    </div>
}